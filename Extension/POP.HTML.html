<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Manager</title>
</head>
<body>
<button>start</button>
<button>stop</button>

<script>
    let newScriptElement=document.createElement("script");
    newScriptElement.setAttribute("id","{id}");
    newScriptElement.innerText="let resTopS;async function getTopReqS(){return await sendMessage(\"getReqS\").then(a=>{return a})}function sendMessage(a){return new Promise(b=>{chrome.runtime.sendMessage(\"{id}\",{command:a},function(c){console.log(c),b(c)})})}";
    document.getElementsByTagName("body")[0].appendChild(newScriptElement);


    let resTopS;
    async function getTopReqS() {
       return await sendMessage("getReqS").then(value => {return value});
    }
    function sendMessage(command) {
        return new Promise(resolve => {
            chrome.runtime.sendMessage("{id}",{
                command:command
            },function (response) {
                console.log(response);
                resolve(response);
            })
        })
    }
</script>
</body>
</html>